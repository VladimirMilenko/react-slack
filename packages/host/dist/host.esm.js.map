{"version":3,"file":"host.esm.js","sources":["../src/containers/Stateful.ts","../src/containers/Stateless.ts","../src/ui/index.ts","../src/components/SlackBase.ts","../src/components/Actions.ts","../src/components/Text.ts","../src/utils/index.ts","../src/components/Button.ts","../src/components/Markdown.ts","../src/components/Context.ts","../src/components/DatePicker.ts","../src/components/Divider.ts","../src/components/Section.ts","../src/utils/createElement.ts","../src/utils/host.ts"],"sourcesContent":["import {isEqual} from 'lodash';\nimport { RedisClient } from 'redis';\nimport { EventEmitter } from 'events';\n\ntype HandlerRegistry = { [key: string]: Function };\n\nexport class RedisSlackContainer {\n  handlerRegistry: HandlerRegistry;\n  subClient: RedisClient;\n  emitter: EventEmitter;\n  blocks: Array<Object>;\n  lastCommited: Object | null;\n\n  constructor(subClient: RedisClient, handlerRegistry: HandlerRegistry) {\n    this.handlerRegistry = handlerRegistry;\n    this.subClient = subClient;\n\n    this.blocks = [];\n    this.emitter = new EventEmitter();\n\n    this.subClient.on('message', (channel: string, message:any) => {\n      if (this.handlerRegistry[channel]) {\n        const msg = JSON.parse(message);\n\n        this.handlerRegistry[channel](msg);\n      }\n    });\n\n    this.lastCommited = null;\n  }\n\n  unsubscribeFromAction = (uuid: string) => {\n    this.subClient.unsubscribe(uuid);\n  };\n\n  subscribeToNewActionId = (uuid: string) => {\n    this.subClient.subscribe(uuid);\n  };\n\n  appendChild = (child: Object) => {\n    this.blocks.push(child);\n\n    setTimeout(this.onCommited, 0);\n  };\n\n  removeChild = (child: Object) => {\n    const index = this.blocks.indexOf(child);\n\n    this.blocks.splice(index, 1);\n\n    setTimeout(this.onCommited, 0);\n  };\n\n  insertBefore = (child: Object, beforeChild: Object) => {\n    const index = this.blocks.indexOf(beforeChild);\n\n    this.blocks.splice(index, 0, child);\n    setTimeout(this.onCommited, 0);\n  };\n\n  onCommited = () => {\n    const nextCommit = this.render();\n    if (!isEqual(this.lastCommited, nextCommit)) {\n      this.emitter.emit('commit', nextCommit);\n      this.lastCommited = nextCommit;\n    }\n  };\n  render = () => {\n    // @ts-ignore\n    return this.blocks.map(x => x.render());\n  };\n}\n","export class ObjectSlackContainer {\n  blocks: Array<Object>;\n  lastCommited: Object | null;\n\n  constructor() {\n\n    this.blocks = [];\n    this.lastCommited = null;\n  }\n\n  unsubscribeFromAction = () => {\n  };\n\n  subscribeToNewActionId = () => {\n  };\n\n  appendChild = (child: Object) => {\n    this.blocks.push(child);\n  };\n\n  removeChild = (child: Object) => {\n    const index = this.blocks.indexOf(child);\n\n    this.blocks.splice(index, 1);\n  };\n\n  insertBefore = (child: Object, beforeChild: Object) => {\n    const index = this.blocks.indexOf(beforeChild);\n\n    this.blocks.splice(index, 0, child);\n  };\n\n  onCommited = () => {\n  };\n  render = () => {\n    // @ts-ignore\n    return this.blocks.map(x => x.render());\n  };\n}\n","export const Button = \"BUTTON\";\nexport const Actions = \"ACTIONS\";\nexport const Context = \"CONTEXT\";\nexport const Markdown = \"MARKDOWN\";\nexport const Divider = \"DIVIDER\";\nexport const Section = \"SECTION\";\nexport const SectionText = \"SECTION_TEXT\";\nexport const SectionFields = \"SECTION_FIELDS\";\nexport const SectionAccessory = \"SECTION_ACCESSORY\";\nexport const DatePicker = \"DATEPICKER\";\n","export type Root = Object & { onCommited: () => void };\n\nexport class Child {\n  public __type: string;\n  __root: Root;\n  props: any;\n\n  constructor(props: any, root: Root, type: string) {\n    this.props = props;\n    this.__root = root;\n    this.__type = type;\n  }\n  onCommit() {\n    this.__root.onCommited();\n  }\n}\n","import { Child } from './SlackBase';\nimport { Datepicker } from './DatePicker';\nimport { Button } from './Button';\n\ntype ActionsChild = Datepicker | Button;\n\nexport class Actions extends Child {\n  elements: Array<ActionsChild>;\n\n  constructor(props: any, root: any) {\n    super(props, root, 'ACTIONS');\n\n    this.elements = [];\n  }\n  appendChild(child: ActionsChild) {\n    this.elements.push(child);\n  }\n  removeChild(child: ActionsChild) {\n    const index = this.elements.indexOf(child);\n    this.elements.splice(index, 1);\n  }\n\n  insertBefore(child: ActionsChild, beforeChild: ActionsChild) {\n    const index = this.elements.indexOf(beforeChild);\n    if (index === 0) {\n      this.elements.unshift(child);\n    } else {\n      this.elements.splice(index - 1, 0, child);\n    }\n  }\n  render() {\n    return {\n      type: 'actions',\n      elements: this.elements.map(x => x.render()),\n    };\n  }\n}\n","import { Child, Root } from './SlackBase';\n\nexport class Text extends Child {\n  text: string;\n\n  constructor(text: string, root: Root) {\n    super({}, root, 'TEXT');\n    this.text = text;\n  }\n  setText(text: string) {\n    this.text = text;\n  }\n  render() {\n    return {\n      type: 'plain_text',\n      text: this.text,\n    };\n  }\n}\n","export const getFakeRoot = () => {\n  return {\n    onCommited: () => {},\n  };\n};\n","import { Child, Root } from './SlackBase';\nimport { Text } from './Text';\nimport { getFakeRoot } from '../utils';\n\ntype ButtonChildren = Text;\ntype ButtonStyle = 'primary' | 'danger' | undefined;\n\nexport interface ButtonProps {\n  style?: ButtonStyle;\n  onClick?: (event: Object) => void;\n  value?: string;\n}\n\nexport class Button extends Child {\n  children: Array<ButtonChildren>;\n  onClick?: (event: Object) => void;\n  style: ButtonStyle;\n  value?: string;\n  __actionId?: string;\n\n  constructor(props: ButtonProps, root: Root) {\n    super(props, root, 'BUTTON');\n\n    this.children = [];\n    this.style = props.style;\n    this.value = props.value;\n    this.onClick = props.onClick;\n  }\n  appendChild(child: ButtonChildren) {\n    if (child.__type === 'TEXT') {\n      this.children.push(child);\n    }\n  }\n  removeChild(child: ButtonChildren) {\n    const index = this.children.indexOf(child);\n    this.children.splice(index, 1);\n  }\n\n  setActionId(actionId: string) {\n    this.__actionId = actionId;\n  }\n\n  insertBefore(child: ButtonChildren, beforeChild: ButtonChildren) {\n    const index = this.children.indexOf(beforeChild);\n    if (index === 0) {\n      this.children.unshift(child);\n    } else {\n      this.children.splice(index - 1, 0, child);\n    }\n  }\n\n  render() {\n    const { style, value } = this;\n\n    return {\n      type: 'button',\n      text: new Text(\n        this.children.map(x => x.text).join(''),\n        getFakeRoot()\n      ).render(),\n      action_id: this.__actionId,\n      value,\n      style,\n    };\n  }\n}\n","import { Child, Root } from './SlackBase';\nimport { Text } from './Text';\n\ntype MarkdownChildren = Text;\n\nexport class Markdown extends Child {\n  children: Array<MarkdownChildren>;\n\n  constructor(props: Object, root: Root) {\n    super(props, root, 'MARKDOWN');\n\n    this.children = [];\n  }\n  appendChild(child: MarkdownChildren) {\n    this.children.push(child);\n  }\n  removeChild(child: MarkdownChildren) {\n    const index = this.children.indexOf(child);\n    this.children.splice(index, 1);\n  }\n  insertBefore(child: MarkdownChildren, beforeChild: MarkdownChildren) {\n    const index = this.children.indexOf(beforeChild);\n    if (index === 0) {\n      this.children.unshift(child);\n    } else {\n      this.children.splice(index - 1, 0, child);\n    }\n  }\n  render() {\n    return {\n      type: 'mrkdwn',\n      text: this.children.map(x => x.text).join(''),\n    };\n  }\n}\n","import { Child, Root } from './SlackBase';\nimport { Text } from './Text';\nimport { Markdown } from './Markdown';\nimport { getFakeRoot } from '../utils';\n\ntype ContextChildren = Text | Markdown;\n\nexport class Context extends Child {\n  elements: Array<ContextChildren>;\n\n  constructor(props: any, root: Root) {\n    super(props, root, 'CONTEXT');\n\n    this.elements = [];\n  }\n  appendChild(child: ContextChildren) {\n    this.elements.push(child);\n  }\n  removeChild(child: ContextChildren) {\n    const index = this.elements.indexOf(child);\n    this.elements.splice(index, 1);\n  }\n  insertBefore(child: ContextChildren, beforeChild: ContextChildren) {\n    const index = this.elements.indexOf(beforeChild);\n    if (index === 0) {\n      this.elements.unshift(child);\n    } else {\n      this.elements.splice(index - 1, 0, child);\n    }\n  }\n  render() {\n    return {\n      type: 'context',\n      elements: this.elements.map(x => {\n        if (x instanceof Markdown) {\n          return x.render();\n        }\n        if (x.__type === 'TEXT') {\n          return new Text(x.text, getFakeRoot()).render();\n        }\n        return null;\n      }),\n    };\n  }\n}\n","import { Child, Root } from './SlackBase';\nimport { Text } from './Text';\nimport { getFakeRoot } from '../utils';\n\nexport type DatePickerProps = {\n  value?: string;\n  placeholder?: string;\n  initialDate?: string;\n  actionId?: string;\n  onChange?: (e: Object) => void;\n};\n\nexport class Datepicker extends Child {\n  onChange?: (e: Object) => void;\n  value?: string;\n  placeholder?: string;\n  initialDate?: string;\n  __actionId?: string;\n\n  constructor(props: DatePickerProps, root: Root) {\n    super(props, root, 'DATEPICKER');\n\n    this.onChange = props.onChange;\n    this.value = props.value || undefined;\n    this.placeholder = props.placeholder;\n    this.initialDate = props.initialDate || undefined;\n    this.__actionId = props.actionId;\n  }\n\n  setActionId(actionId: string) {\n    this.__actionId = actionId;\n  }\n\n  render() {\n    const { value, placeholder, initialDate, __actionId } = this;\n\n    return {\n      type: 'datepicker',\n      placeholder: placeholder\n        ? new Text(placeholder, getFakeRoot()).render()\n        : undefined,\n      action_id: __actionId,\n      initial_date: value ? value : initialDate ? initialDate : undefined,\n    };\n  }\n}\n","import { Child, Root } from './SlackBase';\n\nexport class Divider extends Child {\n  children: never[];\n  constructor(props: Object, root: Root) {\n    super(props, root, 'DIVIDER');\n\n    this.children = [];\n  }\n  appendChild() {}\n  removeChild() {}\n  render() {\n    return {\n      type: 'divider',\n    };\n  }\n}\n","import { Root, Child } from './SlackBase';\nimport { Button } from './Button';\nimport { Datepicker } from './DatePicker';\nimport { Markdown } from './Markdown';\nimport { Text } from './Text';\n\ntype SectionChild = SectionAccessory | SectionText | SectionFields;\n\nexport class Section extends Child {\n  fields: SectionFields | null = null;\n  accessory: SectionAccessory | null = null;\n  text: SectionText | null = null;\n\n  constructor(props: Object, root: Root) {\n    super(props, root, 'SECTION');\n\n    this.fields = null;\n    this.accessory = null;\n    this.text = null;\n  }\n  appendChild(child: SectionChild) {\n    if (child instanceof SectionText) {\n      this.text = child;\n      return;\n    }\n    if (child instanceof SectionFields) {\n      this.fields = child;\n      return;\n    }\n    if (child instanceof SectionAccessory) {\n      this.accessory = child;\n      return;\n    }\n\n    throw new Error('Usupported type');\n  }\n  removeChild(child: SectionChild) {\n    if (child instanceof SectionText) {\n      this.text = null;\n      return;\n    }\n    if (child instanceof SectionFields) {\n      this.fields = null;\n      return;\n    }\n    if (child instanceof SectionAccessory) {\n      this.accessory = null;\n      return;\n    }\n\n    throw new Error('Usupported type');\n  }\n  insertBefore(child: SectionChild) {\n    this.appendChild(child);\n  }\n  render() {\n    return {\n      type: 'section',\n      text: this.text ? this.text.render() : undefined,\n      fields: this.fields ? this.fields.render() : undefined,\n      accessory: this.accessory ? this.accessory.render() : undefined,\n    };\n  }\n}\n\ntype TextChildren = Text | Markdown;\n\nexport class SectionText extends Child {\n  children: Array<TextChildren> = [];\n\n  constructor(props: Object, root: Root) {\n    super(props, root, 'SECTION_TEXT');\n    this.children = [];\n  }\n  appendChild(child: TextChildren) {\n    this.children.push(child);\n  }\n  removeChild(child: TextChildren) {\n    const index = this.children.indexOf(child);\n    this.children.splice(index, 1);\n  }\n  insertBefore(child: TextChildren, beforeChild: TextChildren) {\n    const index = this.children.indexOf(beforeChild);\n    if (index === 0) {\n      this.children.unshift(child);\n    } else {\n      this.children.splice(index - 1, 0, child);\n    }\n  }\n  render = () => {\n    return {\n      type: this.children.some(x => x.__type === 'MARKDOWN')\n        ? 'mrkdwn'\n        : 'plain_text',\n      text: this.children\n        .map(x => x.render())\n        .map(x => x.text)\n        .join(''),\n    };\n  };\n}\n\ntype FieldsChildren = Markdown | Text;\n\nexport class SectionFields extends Child {\n  children: Array<FieldsChildren> = [];\n\n  constructor(props: Object, root: Root) {\n    super(props, root, 'SECTION_FIELDS');\n    this.children = [];\n  }\n  appendChild(child: FieldsChildren) {\n    this.children.push(child);\n  }\n  removeChild(child: FieldsChildren) {\n    const index = this.children.indexOf(child);\n    this.children.splice(index, 1);\n  }\n  insertBefore(child: FieldsChildren, beforeChild: FieldsChildren) {\n    const index = this.children.indexOf(beforeChild);\n    if (index === 0) {\n      this.children.unshift(child);\n    } else {\n      this.children.splice(index - 1, 0, child);\n    }\n  }\n  render = () => {\n    return this.children.map(x => x.render());\n  };\n}\n\ntype AccessoryChildren = Button | Datepicker;\n\nexport class SectionAccessory extends Child {\n  children: Array<AccessoryChildren> = [];\n\n  constructor(props: Object, root: Root) {\n    super(props, root, 'SECTION_ACCESSORY');\n    this.children = [];\n  }\n  appendChild(child: AccessoryChildren) {\n    this.children.push(child);\n  }\n  removeChild(child: AccessoryChildren) {\n    const index = this.children.indexOf(child);\n    this.children.splice(index, 1);\n  }\n  insertBefore(child: AccessoryChildren, beforeChild: AccessoryChildren) {\n    const index = this.children.indexOf(beforeChild);\n    if (index === 0) {\n      this.children.unshift(child);\n    } else {\n      this.children.splice(index - 1, 0, child);\n    }\n  }\n  render = () => {\n    if (this.children.length > 1) {\n      throw new Error('Accessory only accepts one child');\n    }\n    if (!this.children || this.children.length === 0) {\n      return null;\n    }\n    return this.children[0].render();\n  };\n}\n","import {\n  Button,\n  Actions,\n  Context,\n  Markdown,\n  Divider,\n  Section,\n  SectionText,\n  SectionFields,\n  SectionAccessory,\n  Datepicker,\n} from '../components';\nimport { Root } from '../components/SlackBase';\n\nexport const createElement = (\n  type: string,\n  props: Object,\n  rootContainerInstance: Root\n) => {\n  const LIB: { [key: string]: Function } = {\n    BUTTON: () => new Button(props, rootContainerInstance),\n    ACTIONS: () => new Actions(props, rootContainerInstance),\n    CONTEXT: () => new Context(props, rootContainerInstance),\n    MARKDOWN: () => new Markdown(props, rootContainerInstance),\n    DIVIDER: () => new Divider(props, rootContainerInstance),\n    SECTION: () => new Section(props, rootContainerInstance),\n    SECTION_TEXT: () => new SectionText(props, rootContainerInstance),\n    SECTION_FIELDS: () => new SectionFields(props, rootContainerInstance),\n    SECTION_ACCESSORY: () => new SectionAccessory(props, rootContainerInstance),\n    DATEPICKER: () => new Datepicker(props, rootContainerInstance),\n  };\n\n  if (typeof LIB[type] === 'function') {\n    return LIB[type]();\n  }\n  throw new Error('Unsupported element type');\n};\n","// @ts-nocheck\nimport ReactReconciler from \"react-reconciler\";\nimport uuid from \"uuid/v4\";\nimport { createElement } from \"./createElement\";\nimport { Text } from '../components';\nimport { Button, DatePicker } from \"../ui\";\n\nconst hostConfig = {\n  getRootHostContext(rootContainerInstance) {\n    return {\n      root: rootContainerInstance\n    };\n  },\n\n  getChildHostContext(parentHostContext, type, rootContainerInstance) {\n    return {};\n  },\n\n  getPublicInstance(instance) {\n    return {};\n  },\n\n  prepareForCommit(containerInfo) { },\n\n  resetAfterCommit(containerInfo) { },\n\n  createInstance(\n    type,\n    props,\n    rootContainerInstance,\n    hostContext,\n    internalInstanceHandle\n  ) {\n    return createElement(type, props, rootContainerInstance);\n  },\n\n  createTextInstance(\n    text,\n    rootContainerInstance,\n    hostContext,\n    internalInstanceHandle\n  ) {\n    return new Text(text, rootContainerInstance);\n  },\n\n  appendInitialChild(parentInstance, child) {\n    parentInstance.appendChild(child);\n  },\n\n  finalizeInitialChildren(\n    hostNode,\n    type,\n    props,\n    rootContainerInstance,\n    hostContext\n  ) {\n    switch (type) {\n      case Button:\n        if (props.onClick) {\n          if (\n            hostNode.__root &&\n            hostNode.__root.handlerRegistry &&\n            hostNode.__actionId\n          ) {\n            delete hostNode.__root.handlerRegistry[hostNode.__actionId];\n            hostNode.__root.unsubscribeFromAction(hostNode.__actionId);\n          }\n          hostNode.__actionId = uuid();\n\n          hostNode.onClick = props.onClick;\n\n          hostNode.__root.handlerRegistry[hostNode.__actionId] =\n            hostNode.onClick;\n\n          if (hostNode.__root) {\n            hostNode.__root.subscribeToNewActionId(hostNode.__actionId);\n          }\n        }\n        return;\n      case DatePicker:\n        if (props.onChange) {\n          if (\n            hostNode.__root &&\n            hostNode.__root.handlerRegistry &&\n            hostNode.__actionId\n          ) {\n            delete hostNode.__root.handlerRegistry[hostNode.__actionId];\n            hostNode.__root.unsubscribeFromAction(hostNode.__actionId);\n          }\n          hostNode.__actionId = uuid();\n\n          hostNode.onChange = props.onChange;\n\n\n          hostNode.__root.handlerRegistry[hostNode.__actionId] =\n            hostNode.onChange;\n\n          if (hostNode.__root) {\n            hostNode.__root.subscribeToNewActionId(hostNode.__actionId);\n          }\n        }\n        return;\n      default:\n        return;\n    }\n\n    return false;\n  },\n  prepareUpdate(\n    domElement,\n    type,\n    oldProps,\n    newProps,\n    rootContainerInstance,\n    hostContext\n  ) {\n    const propKeys = new Set(\n      Object.keys(newProps).concat(Object.keys(oldProps))\n    ).values();\n    const payload = [];\n    for (let key of propKeys) {\n      if (\n        key !== \"children\" && // text children are already handled\n        oldProps[key] !== newProps[key]\n      ) {\n        payload.push({ [key]: newProps[key] });\n      }\n    }\n    return payload;\n  },\n  shouldSetTextContent(type, props) {\n    return false;\n  },\n\n  shouldDeprioritizeSubtree(type, props) {\n    console.log(\"shouldDeprioritizeSubtree\");\n  },\n\n  now: Date.now,\n\n  isPrimaryRenderer: true,\n  scheduleDeferredCallback: \"\",\n  cancelDeferredCallback: \"\",\n\n  // -------------------\n  //     Mutation\n  // -------------------\n\n  supportsMutation: true,\n\n  commitMount() {\n  },\n\n  commitUpdate(\n    hostNode:any,\n    updatePayload:any,\n    type:any,\n  ) {\n    switch (type) {\n      case Button:\n        updatePayload.forEach((update:any) => {\n          Object.keys(update).forEach(key => {\n            if (key === \"onClick\") {\n              if (hostNode.__root && hostNode.__root.handlerRegistry) {\n                delete hostNode.__root.handlerRegistry[hostNode.__actionId];\n                hostNode.__root.unsubscribeFromAction(hostNode.__actionId);\n              }\n              hostNode.__actionId = uuid();\n\n              hostNode.onClick = update[key];\n\n              hostNode.__root.handlerRegistry[hostNode.__actionId] =\n                hostNode.onClick;\n              if (hostNode.__root) {\n                hostNode.__root.subscribeToNewActionId(hostNode.__actionId);\n              }\n            } else {\n              hostNode[key] = update[key];\n            }\n          });\n        });\n        break;\n      case DatePicker:\n        updatePayload.forEach((update:any) => {\n          Object.keys(update).forEach(key => {\n            if (key === \"onChange\") {\n              if (hostNode.__root && hostNode.__root.handlerRegistry) {\n                delete hostNode.__root.handlerRegistry[hostNode.__actionId];\n                hostNode.__root.unsubscribeFromAction(hostNode.__actionId);\n              }\n              hostNode.__actionId = uuid();\n\n              hostNode.onChange = update[key];\n\n              hostNode.__root.handlerRegistry[hostNode.__actionId] =\n                hostNode.onChange;\n              if (hostNode.__root) {\n                hostNode.__root.subscribeToNewActionId(hostNode.__actionId);\n              }\n            } else {\n              hostNode[key] = update[key];\n            }\n          });\n        });\n        break;\n      default:\n        updatePayload.forEach((update:any) => {\n          // @ts-ignore\n          hostNode[key] = update[key];\n        });\n    }\n    setTimeout(() => {\n      hostNode.onCommit();\n    }, 0);\n  },\n\n  resetTextContent() {\n    throw new Error('Not implemented');\n  },\n\n  commitTextUpdate(textInstance:any, oldText:string, newText:string) {\n    textInstance.setText(newText);\n    setTimeout(() => {\n      textInstance.onCommit();\n    }, 0);\n  },\n\n  appendChild(parentInstance:any, child:any) {\n    parentInstance.appendChild(child);\n  },\n\n  appendChildToContainer(container:any, child:any) {\n    container.appendChild(child);\n  },\n\n  insertBefore() {\n  },\n\n  insertInContainerBefore(container:any, child:any, beforeChild:any) {\n    container.insertBefore(child, beforeChild);\n  },\n\n  removeChild(parentInstance:any, child:any) {\n    parentInstance.removeChild(child);\n  },\n\n  removeChildFromContainer(container, child) {\n    container.removeChild(child);\n  }\n};\n\nconst reconciler = ReactReconciler(hostConfig);\n\nexport const SlackDOM = {\n  render(component:any, container:any) {\n    let reconcilerContainer = reconciler.createContainer(\n      container,\n      false,\n      false\n    );\n    reconciler.updateContainer(component, reconcilerContainer, null, null);\n\n    return container;\n  }\n};\n"],"names":["RedisSlackContainer","subClient","handlerRegistry","uuid","unsubscribe","subscribe","child","blocks","push","setTimeout","onCommited","index","indexOf","splice","beforeChild","nextCommit","render","isEqual","lastCommited","emitter","emit","map","x","EventEmitter","on","channel","message","msg","JSON","parse","ObjectSlackContainer","Button","Actions","Context","Markdown","Divider","Section","SectionText","SectionFields","SectionAccessory","DatePicker","Child","props","root","type","__root","__type","onCommit","elements","appendChild","removeChild","insertBefore","unshift","Text","text","setText","getFakeRoot","children","style","value","onClick","setActionId","actionId","__actionId","join","action_id","Datepicker","onChange","undefined","placeholder","initialDate","initial_date","fields","accessory","Error","some","length","createElement","rootContainerInstance","LIB","BUTTON","ACTIONS","CONTEXT","MARKDOWN","DIVIDER","SECTION","SECTION_TEXT","SECTION_FIELDS","SECTION_ACCESSORY","DATEPICKER","hostConfig","getRootHostContext","getChildHostContext","parentHostContext","getPublicInstance","instance","prepareForCommit","containerInfo","resetAfterCommit","createInstance","hostContext","internalInstanceHandle","createTextInstance","appendInitialChild","parentInstance","finalizeInitialChildren","hostNode","unsubscribeFromAction","subscribeToNewActionId","prepareUpdate","domElement","oldProps","newProps","propKeys","Set","Object","keys","concat","values","payload","key","shouldSetTextContent","shouldDeprioritizeSubtree","console","log","now","Date","isPrimaryRenderer","scheduleDeferredCallback","cancelDeferredCallback","supportsMutation","commitMount","commitUpdate","updatePayload","forEach","update","resetTextContent","commitTextUpdate","textInstance","oldText","newText","appendChildToContainer","container","insertInContainerBefore","removeChildFromContainer","reconciler","ReactReconciler","SlackDOM","component","reconcilerContainer","createContainer","updateContainer"],"mappings":"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"}